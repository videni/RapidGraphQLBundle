imports:
    - { resource: 'routing.yaml'}
    - { resource: 'serializer.yaml'}
    - { resource: 'action.yaml'}
    - { resource: 'security.yaml'}
    - { resource: 'filters.yaml'}
    - { resource: 'config.yaml'}
    - { resource: 'utils.yaml'}
    - { resource: 'event_listener.yaml'}

parameters:
    videni_rest.formats:
        json:
           - 'application/json'

services:
    _defaults:
        autowire: true
        autoconfigure: true
        public: false

    Videni\Bundle\RestBundle\:
        resource: '../../{Paginator}'
        public: true

    Videni\Bundle\RestBundle\Faker\EntityProvider:
        arguments:
            - '@doctrine.orm.entity_manager'
        tags:
            - { name: 'nelmio_alice.faker.provider' }

    Videni\Bundle\RestBundle\Factory\ResourceFactory: ~

    Videni\Bundle\RestBundle\Factory\ParametersParser:
        arguments: ['@service_container', '@Videni\Bundle\RestBundle\ExpressionLanguage\ExpressionLanguage']

    Videni\Bundle\RestBundle\Factory\ParametersParserInterface: '@Videni\Bundle\RestBundle\Factory\ParametersParser'

    Videni\Bundle\RestBundle\ExpressionLanguage\ExpressionLanguage: ~

    Videni\Bundle\RestBundle\Validator\Validator:
        arguments: ['@validator', '@service_container']

    Videni\Bundle\RestBundle\Validator\ValidatorInterface: '@Videni\Bundle\RestBundle\Validator\Validator'

    Hateoas\Representation\Factory\PagerfantaFactory: ~

    Videni\Bundle\RestBundle\Provider\FormatsProvider:
        arguments:
            - '%videni_rest.formats%'

    Videni\Bundle\RestBundle\Provider\FormatsProviderInterface: '@Videni\Bundle\RestBundle\Provider\FormatsProvider'

    Videni\Bundle\RestBundle\Event\EventDispatcher:
        arguments:
            - "@event_dispatcher"
            - '@=parameter("videni_rest.bundle_config")["application_name"]'

    Videni\Bundle\RestBundle\Filter\Normalizer\FilterValueNormalizerInterface: '@Videni\Bundle\RestBundle\Filter\Normalizer\CompositeNormalizer'

    Videni\Bundle\RestBundle\EventListener\ORMMappedSuperClassSubscriber:
        tags:
            - { name: "doctrine.event_subscriber", priority: 8192}
